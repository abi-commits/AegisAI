# Development override for docker-compose.yml
# Usage: docker compose -f docker-compose.yml -f docker-compose.dev.yml up

services:
  aegis-api:
    build:
      context: .
      dockerfile: docker/Dockerfile.dev
    image: aegis-ai:dev
    container_name: aegis-api-dev
    environment:
      - AEGIS_ENVIRONMENT=development
      - AEGIS_LOG_LEVEL=DEBUG
      - AEGIS_AUDIT_STORAGE_TYPE=local
    volumes:
      # Mount source code for hot reload
      - ./src:/app/src:ro
      - ./config:/app/config:ro
      - ./tests:/app/tests:ro
      - ./logs:/app/logs
    command: >
      uvicorn aegis_ai.api.gateway:app
      --host 0.0.0.0
      --port 8000
      --reload
      --reload-dir /app/src
    ports:
      - "8000:8000"
    deploy:
      resources:
        limits:
          cpus: "4"
          memory: 8G
